import{_ as a,c as s,o as i,ag as t}from"./chunks/framework.B15mxHos.js";const u=JSON.parse('{"title":"Upgrading LWT","description":"","frontmatter":{},"headers":[],"relativePath":"guide/upgrade.md","filePath":"guide/upgrade.md"}'),r={name:"guide/upgrade.md"};function o(n,e,l,d,h,p){return i(),s("div",null,[...e[0]||(e[0]=[t(`<h1 id="upgrading-lwt" tabindex="-1">Upgrading LWT <a class="header-anchor" href="#upgrading-lwt" aria-label="Permalink to &quot;Upgrading LWT&quot;">​</a></h1><p>This guide covers how to upgrade Learning with Texts to a newer version safely.</p><h2 id="how-upgrades-work" tabindex="-1">How Upgrades Work <a class="header-anchor" href="#how-upgrades-work" aria-label="Permalink to &quot;How Upgrades Work&quot;">​</a></h2><p>LWT uses an <strong>automatic database migration system</strong>. When you start LWT after updating the files, it automatically:</p><ol><li>Detects your current database version</li><li>Runs any pending migrations to update the database schema</li><li>Updates the <code>dbversion</code> setting to match the current version</li></ol><p>This means most upgrades are seamless - just replace the files and open LWT.</p><h2 id="standard-upgrade-process" tabindex="-1">Standard Upgrade Process <a class="header-anchor" href="#standard-upgrade-process" aria-label="Permalink to &quot;Standard Upgrade Process&quot;">​</a></h2><h3 id="step-1-backup-your-data" tabindex="-1">Step 1: Backup Your Data <a class="header-anchor" href="#step-1-backup-your-data" aria-label="Permalink to &quot;Step 1: Backup Your Data&quot;">​</a></h3><p>Before any upgrade, create backups:</p><p><strong>Database backup (recommended):</strong></p><ol><li>Open LWT in your browser</li><li>Go to <strong>Settings</strong> (gear icon)</li><li>Click <strong>Backup/Restore/Empty Database</strong></li><li>Click <strong>Backup ENTIRE Database</strong> to download a backup file</li></ol><p><strong>File backup:</strong></p><p>Copy your entire LWT directory to a safe location. Important files include:</p><ul><li><code>.env</code> - Your database configuration</li><li><code>media/</code> - Your audio files (if you created this folder)</li></ul><h3 id="step-2-download-the-new-version" tabindex="-1">Step 2: Download the New Version <a class="header-anchor" href="#step-2-download-the-new-version" aria-label="Permalink to &quot;Step 2: Download the New Version&quot;">​</a></h3><p>Get the latest release:</p><ul><li><strong>Stable releases</strong>: <a href="https://github.com/HugoFara/lwt/releases" target="_blank" rel="noreferrer">GitHub Releases</a></li><li><strong>Latest development</strong>: <a href="https://github.com/HugoFara/lwt/archive/refs/heads/main.zip" target="_blank" rel="noreferrer">Download main branch</a></li></ul><h3 id="step-3-replace-files" tabindex="-1">Step 3: Replace Files <a class="header-anchor" href="#step-3-replace-files" aria-label="Permalink to &quot;Step 3: Replace Files&quot;">​</a></h3><ol><li>Extract the new version</li><li>Copy your <code>.env</code> file from the backup into the new LWT directory</li><li>Copy your <code>media/</code> folder (if it exists) into the new directory</li><li>Replace the old LWT directory with the new one</li></ol><h3 id="step-4-clear-browser-cache" tabindex="-1">Step 4: Clear Browser Cache <a class="header-anchor" href="#step-4-clear-browser-cache" aria-label="Permalink to &quot;Step 4: Clear Browser Cache&quot;">​</a></h3><p>Clear your browser cache to ensure you&#39;re loading the new JavaScript and CSS files. You can also try:</p><ul><li>Hard refresh: <code>Ctrl+Shift+R</code> (Windows/Linux) or <code>Cmd+Shift+R</code> (Mac)</li><li>Or open LWT in a private/incognito window</li></ul><h3 id="step-5-open-lwt" tabindex="-1">Step 5: Open LWT <a class="header-anchor" href="#step-5-open-lwt" aria-label="Permalink to &quot;Step 5: Open LWT&quot;">​</a></h3><p>Open LWT in your browser as usual. The database will be automatically updated if needed.</p><h2 id="docker-upgrades" tabindex="-1">Docker Upgrades <a class="header-anchor" href="#docker-upgrades" aria-label="Permalink to &quot;Docker Upgrades&quot;">​</a></h2><p>If you&#39;re using Docker:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Stop the current container</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> down</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Pull the latest image (if using pre-built images)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or rebuild from source</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-cache</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start the updated container</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><p>Your data persists in Docker volumes, so it will be preserved across upgrades.</p><h2 id="upgrading-from-very-old-versions" tabindex="-1">Upgrading from Very Old Versions <a class="header-anchor" href="#upgrading-from-very-old-versions" aria-label="Permalink to &quot;Upgrading from Very Old Versions&quot;">​</a></h2><p>If you&#39;re upgrading from a version older than 2.7.0 (released before 2022), special considerations apply:</p><h3 id="database-schema-changes" tabindex="-1">Database Schema Changes <a class="header-anchor" href="#database-schema-changes" aria-label="Permalink to &quot;Database Schema Changes&quot;">​</a></h3><p>Older versions used a different database structure. The migration system will attempt to convert your data, but for very old versions:</p><ol><li><strong>Export your data first</strong>: Use LWT&#39;s export features to save your terms and texts</li><li><strong>Consider a fresh install</strong>: Create a new database, then import your exported data</li><li><strong>Test thoroughly</strong>: After upgrading, verify your terms and texts are intact</li></ol><h3 id="configuration-file-changes" tabindex="-1">Configuration File Changes <a class="header-anchor" href="#configuration-file-changes" aria-label="Permalink to &quot;Configuration File Changes&quot;">​</a></h3><ul><li>Versions before 3.0 used <code>connect.inc.php</code> instead of <code>.env</code></li><li>If upgrading from these versions, create a new <code>.env</code> file based on <code>.env.example</code></li><li>Copy your database credentials from <code>connect.inc.php</code> to <code>.env</code></li></ul><h3 id="php-version-requirements" tabindex="-1">PHP Version Requirements <a class="header-anchor" href="#php-version-requirements" aria-label="Permalink to &quot;PHP Version Requirements&quot;">​</a></h3><p>Modern LWT requires <strong>PHP 8.1 or higher</strong>. If your server runs an older PHP version, you&#39;ll need to upgrade PHP first.</p><table tabindex="0"><thead><tr><th>LWT Version</th><th>Minimum PHP</th></tr></thead><tbody><tr><td>3.0+</td><td>PHP 8.1</td></tr><tr><td>2.9.x</td><td>PHP 8.0</td></tr><tr><td>2.0-2.8</td><td>PHP 7.4</td></tr><tr><td>&lt; 2.0</td><td>PHP 5.6</td></tr></tbody></table><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="database-needs-to-be-reinstalled-error" tabindex="-1">&quot;Database needs to be reinstalled&quot; Error <a class="header-anchor" href="#database-needs-to-be-reinstalled-error" aria-label="Permalink to &quot;&quot;Database needs to be reinstalled&quot; Error&quot;">​</a></h3><p>This usually means the migration couldn&#39;t complete. Try:</p><ol><li>Restore your database backup</li><li>Check that your <code>.env</code> credentials are correct</li><li>Ensure your MySQL/MariaDB user has ALTER TABLE permissions</li></ol><h3 id="features-not-working-after-upgrade" tabindex="-1">Features Not Working After Upgrade <a class="header-anchor" href="#features-not-working-after-upgrade" aria-label="Permalink to &quot;Features Not Working After Upgrade&quot;">​</a></h3><ol><li><p><strong>Clear browser cache</strong> completely</p></li><li><p><strong>Check browser console</strong> (F12) for JavaScript errors</p></li><li><p><strong>Rebuild assets</strong> if you&#39;re running from source:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:all</span></span></code></pre></div></li></ol><h3 id="tests-not-auto-advancing" tabindex="-1">Tests Not Auto-Advancing <a class="header-anchor" href="#tests-not-auto-advancing" aria-label="Permalink to &quot;Tests Not Auto-Advancing&quot;">​</a></h3><p>If tests don&#39;t advance to the next word after upgrading:</p><ol><li>Clear your browser cache</li><li>Check if JavaScript is loading correctly (F12 &gt; Console)</li><li>Try a different browser to isolate the issue</li></ol><h3 id="database-connection-errors" tabindex="-1">Database Connection Errors <a class="header-anchor" href="#database-connection-errors" aria-label="Permalink to &quot;Database Connection Errors&quot;">​</a></h3><p>Verify your <code>.env</code> file has the correct settings:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_HOST</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">localhost</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # Or your database host</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_USER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">root</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # Your database username</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_PASSWORD</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # Your database password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DB_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">learning-with-texts</span></span></code></pre></div><h2 id="checking-your-version" tabindex="-1">Checking Your Version <a class="header-anchor" href="#checking-your-version" aria-label="Permalink to &quot;Checking Your Version&quot;">​</a></h2><p>To see your current LWT version:</p><ol><li>Look at the footer of any LWT page</li><li>Or check the <code>dbversion</code> value in your database&#39;s <code>settings</code> table</li></ol><h2 id="downgrading" tabindex="-1">Downgrading <a class="header-anchor" href="#downgrading" aria-label="Permalink to &quot;Downgrading&quot;">​</a></h2><p>Downgrading is <strong>not officially supported</strong> because newer database migrations cannot be reversed automatically. If you need to downgrade:</p><ol><li>Restore your database backup from before the upgrade</li><li>Use the older LWT files</li></ol><p>This is why backups before upgrading are essential.</p><h2 id="getting-help" tabindex="-1">Getting Help <a class="header-anchor" href="#getting-help" aria-label="Permalink to &quot;Getting Help&quot;">​</a></h2><p>If you encounter issues:</p><ul><li><a href="https://github.com/HugoFara/lwt/issues" target="_blank" rel="noreferrer">GitHub Issues</a> - Report bugs or search existing issues</li></ul>`,60)])])}const g=a(r,[["render",o]]);export{u as __pageData,g as default};
